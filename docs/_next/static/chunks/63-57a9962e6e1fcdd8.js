(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{8063:function(t,e,a){"use strict";a.d(e,{Z:function(){return W}});var r=a(4111),i=a(1438),n=a(2951),s=a(4924),o=a(8029),l=a(2670),h=a(797),d=a(460),c=a(5893),p=a(7294),u=a(6042),g=a(9396),m=a(4147),x=a(7896),v=function(t){(0,o.Z)(a,t);var e=(0,d.Z)(a);function a(){var t;return(0,i.Z)(this,a),t=e.call(this),(0,s.Z)((0,r.Z)(t),"state",{selection:void 0}),(0,s.Z)((0,r.Z)(t),"handleInputChange",(function(e){t.setState({selection:e}),e=e||[];for(var a=[],r=0;r<e.length;r++)a.push(e[r].value);t.props.onSelection(a)})),(0,s.Z)((0,r.Z)(t),"promiseOptions",(function(e){var a=t.props.dataSet?t.props.dataSet.getSelectData():[];return new Promise((function(i){var n=new Worker("worker.js"),s={data:a,blacklist:t.props.blacklist,query:e,limit:10};n.postMessage(s),n.addEventListener("message",function(t){for(var e=0;e<t.data.length;e++){var a=this.props.dataSet.getPlayerRating(this.props.ratingLabelOne,t.data[e].value),r=this.props.dataSet.getPlayerRating(this.props.ratingLabelTwo,t.data[e].value);t.data[e].rating="".concat(a||""," / ").concat(r||"")}i(t.data)}.bind((0,r.Z)(t)),!1)}))})),t.styles={control:function(e,a){var r;return(0,g.Z)((0,u.Z)({},e),(r={boxShadow:"0 0 0 1px ".concat(t.props.color)},(0,s.Z)(r,"boxShadow",a.isFocused?"0 0 0 0.2rem ".concat(t.props.color):0),(0,s.Z)(r,"borderColor",a.isFocused?"".concat(t.props.color):"#CED4DA"),(0,s.Z)(r,"&:hover",{borderColor:a.isFocused?"".concat(t.props.color):"#CED4DA"}),r))}},t.option=function(t){return(0,c.jsx)(x.F.Option,(0,g.Z)((0,u.Z)({},t),{children:(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)("div",{children:t.data.label}),(0,c.jsx)("div",{style:{paddingLeft:"10px",opacity:.5},children:t.data.rating})]})}))},t}return(0,n.Z)(a,[{key:"componentDidUpdate",value:function(t){var e=this;if(this.props.value&&this.props.dataSet&&t.value!=this.props.value){for(var a=this.props.value.filter((function(t){return e.props.dataSet.exists(t)})),r=[],i=0;i<a.length;i++){var n=a[i];r.push({label:this.props.dataSet.getName(n),value:n})}this.setState({selection:r})}}},{key:"render",value:function(){return(0,c.jsx)(m.ZP,{isMulti:!0,cacheOptions:!0,defaultOptions:!0,loadOptions:this.promiseOptions.bind(this),onChange:this.handleInputChange.bind(this),noOptionsMessage:function(){return"Type a player's name"},value:this.state.selection,styles:this.styles,components:{Option:this.option}})}}]),a}(p.Component),f=v,y=a(7355),b=a.n(y),A=a(1039),w=A.Z.getAllLabels(),R=function(t){(0,o.Z)(a,t);var e=(0,d.Z)(a);function a(){var t;return(0,i.Z)(this,a),t=e.apply(this,arguments),(0,s.Z)((0,r.Z)(t),"state",{}),t}return(0,n.Z)(a,[{key:"calculateAverage",value:function(t,e,a,r){for(var i=0,n=0,s=0;s<r.length;s++){var o=e.call(t,a,r[s]);o&&(n+=o,i++)}return i>0?n/i:"-"}},{key:"formatAverage",value:function(t){return isNaN(t)?"":Math.round(t)}},{key:"render",value:function(){var t=this.props.data,e=this.props.players.filter((function(e){return t.exists(e)})),a=this.props.color,r=this.props.teamLabel;if(0===e.length||!e)return null;for(var i=[],n=0;n<e.length;n++){var s=e[n],o=t.getPlayerRating(w.NAME,s),l=t.getPlayerRating(this.props.dataLabelOne,s),h=t.getPlayerPercentile(this.props.dataLabelOne,s),d=t.getPlayerRating(this.props.dataLabelTwo,s),p=t.getPlayerPercentile(this.props.dataLabelTwo,s),u=t.getPlayerRating(this.props.dataLabelThree,s),g=t.getPlayerPercentile(this.props.dataLabelThree,s);i.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{width:"28%",children:o}),(0,c.jsx)("th",{width:"12%",style:{borderLeft:"1px solid "+a},children:l}),(0,c.jsx)("th",{width:"12%",children:t.formatPercentage(h)}),(0,c.jsx)("th",{width:"12%",style:{borderLeft:"1px solid "+a},children:d}),(0,c.jsx)("th",{width:"12%",children:t.formatPercentage(p)}),(0,c.jsx)("th",{width:"12%",style:{borderLeft:"1px solid "+a},children:u}),(0,c.jsx)("th",{width:"12%",children:t.formatPercentage(g)})]},"player-"+s))}if(e.length>1){var m=this.calculateAverage(t,t.getPlayerRating,this.props.dataLabelOne,e),x=this.calculateAverage(t,t.getPlayerPercentile,this.props.dataLabelOne,e),v=this.calculateAverage(t,t.getPlayerRating,this.props.dataLabelTwo,e),f=this.calculateAverage(t,t.getPlayerPercentile,this.props.dataLabelTwo,e),y=this.calculateAverage(t,t.getPlayerRating,this.props.dataLabelThree,e),A=this.calculateAverage(t,t.getPlayerPercentile,this.props.dataLabelThree,e);i.push((0,c.jsxs)("tr",{style:{borderTop:"1px solid "+a},children:[(0,c.jsx)("th",{className:b().teamAvgRow,children:(0,c.jsxs)("b",{children:[r," Avg"]})}),(0,c.jsx)("th",{className:b().teamAvgRow,style:{borderLeft:"1px solid "+a},children:(0,c.jsx)("b",{children:this.formatAverage(m)})}),(0,c.jsx)("th",{className:b().teamAvgRow,children:(0,c.jsx)("b",{children:t.formatPercentage(x)})}),(0,c.jsx)("th",{className:b().teamAvgRow,style:{borderLeft:"1px solid "+a},children:(0,c.jsx)("b",{children:this.formatAverage(v)})}),(0,c.jsx)("th",{className:b().teamAvgRow,children:(0,c.jsx)("b",{children:t.formatPercentage(f)})}),(0,c.jsx)("th",{className:b().teamAvgRow,style:{borderLeft:"1px solid "+a},children:(0,c.jsx)("b",{children:this.formatAverage(y)})}),(0,c.jsx)("th",{className:b().teamAvgRow,children:(0,c.jsx)("b",{children:t.formatPercentage(A)})})]}))}return(0,c.jsx)("div",{className:b().teamTable,style:{borderColor:this.props.color},children:(0,c.jsx)("table",{style:{width:"100%",borderSpacing:"0px",fontSize:"12px",borderCollapse:"collapse",tableLayout:"fixed"},children:(0,c.jsx)("tbody",{children:i})})})}}]),a}(p.Component),T=R,M=a(4977),_=function(){function t(e,a,r){(0,i.Z)(this,t),this.tree=M(),this.values=[];var n=0;for(var s in e){var o=e[s][a];if(r||this.values.push(o),void 0!==o){var l=this.tree.find(o);null===l||null===l.node?this.tree=this.tree.insert(o,1):l.node.value=l.node.value+1,n++}}for(var h=0,d=this.tree.begin;d.hasNext;d.next()){var c=h/(n-1);h+=d.node.value,d.node.value=c}}return(0,n.Z)(t,[{key:"getPercentile",value:function(t){return this.tree.le(t).value}},{key:"getAllNumbers",value:function(){return this.values}}]),t}(),N=A.Z.getAllLabels(),j=function(){function t(e){(0,i.Z)(this,t),this.rawData=void 0;try{this.rawData=JSON.parse(e)}catch(p){throw console.log("An error occurred while parsing",e),p}for(var a in this.rawData){var r=N.RANDOM_MAP_RATING,n=N.TEAM_RANDOM_MAP_RATING;if(this.rawData[a][r]&&this.rawData[a][n]){var s=Math.round(Math.round(Math.sqrt(Math.pow(this.rawData[a][r],2)+Math.pow(this.rawData[a][n],2))));this.rawData[a][N.RANDOM_MAP_COMBO_RATING]=s}if(r=N.DEATHMATCH_RATING,n=N.TEAM_DEATHMATCH_RATING,this.rawData[a][r]&&this.rawData[a][n]){var o=Math.round(Math.round(Math.sqrt(Math.pow(this.rawData[a][r],2)+Math.pow(this.rawData[a][n],2))));this.rawData[a][N.DEATHMATCH_COMBO_RATING]=o}if(r=N.EMPIRE_WARS_RATING,n=N.EMPIRE_WARS_TEAM_RATING,this.rawData[a][r]&&this.rawData[a][n]){var l=Math.round(Math.round(Math.sqrt(Math.pow(this.rawData[a][r],2)+Math.pow(this.rawData[a][n],2))));this.rawData[a][N.EMPIRE_WARS_COMBO_RATING]=l}}var h={};for(var d in h[N.RANDOM_MAP_RATING]=new _(this.rawData,N.RANDOM_MAP_RATING),h[N.TEAM_RANDOM_MAP_RATING]=new _(this.rawData,N.TEAM_RANDOM_MAP_RATING),h[N.RANDOM_MAP_COMBO_RATING]=new _(this.rawData,N.RANDOM_MAP_COMBO_RATING,!0),h[N.DEATHMATCH_RATING]=new _(this.rawData,N.DEATHMATCH_RATING),h[N.TEAM_DEATHMATCH_RATING]=new _(this.rawData,N.TEAM_DEATHMATCH_RATING),h[N.DEATHMATCH_COMBO_RATING]=new _(this.rawData,N.DEATHMATCH_COMBO_RATING,!0),h[N.UNRANKED_RATING]=new _(this.rawData,N.UNRANKED_RATING,!0),h[N.EMPIRE_WARS_RATING]=new _(this.rawData,N.EMPIRE_WARS_RATING),h[N.EMPIRE_WARS_TEAM_RATING]=new _(this.rawData,N.EMPIRE_WARS_TEAM_RATING),h[N.EMPIRE_WARS_COMBO_RATING]=new _(this.rawData,N.EMPIRE_WARS_COMBO_RATING,!0),this.percentileTrees=h,this.selectData=[],this.rawData)this.selectData.push({value:d,label:this.rawData[d][N.NAME]});for(var c in this.names=[],this.rawData)this.names.push(this.rawData[c][N.NAME])}return(0,n.Z)(t,[{key:"exists",value:function(t){return Boolean(this.rawData[t])}},{key:"getName",value:function(t){return this.rawData[t][N.NAME]}},{key:"getAllNames",value:function(){return this.names}},{key:"getSelectData",value:function(){return this.selectData}},{key:"getPlayerRating",value:function(t,e){return this.rawData[e][t]}},{key:"getPlayerPercentile",value:function(t,e){var a=this.getPlayerRating(t,e);return this.getPercentileForRating(t,a)}},{key:"getRatingsArray",value:function(t){return this.percentileTrees[t].getAllNumbers()}},{key:"getPercentileForRating",value:function(t,e){if(void 0!==e)return this.percentileTrees[t].getPercentile(e)}},{key:"formatPercentage",value:function(t){if(null===t||void 0===t||isNaN(t))return"-";if(1==t)return"100%";var e=(100*t).toString();return(e=e.slice(0,e.indexOf(".")+2))+"%"}}]),t}(),P=a(4051),D=a.n(P);Number.prototype.clamp=function(t,e){return Math.min(Math.max(this,t),e)};var O=!1,I=function(){function t(e,a,r,n,s){(0,i.Z)(this,t),this.inputAnnotations=e;var o=r-a,l=s-n;this.annotationWidth=o/5,this.annotationHeight=l/12,this.minX=a+this.annotationWidth/2,this.maxX=r-this.annotationWidth/2,this.minY=n,this.maxY=s;var h=this.maxX-this.minX,d=this.maxY-this.minY;this.numberOfXPartitions=Math.trunc(h/this.annotationWidth),this.numberOfYPartitions=Math.trunc(d/this.annotationHeight),this.usedIndexes=new Set}return(0,n.Z)(t,[{key:"getClosestPartitionIndex",value:function(t,e,a,r){var i=(t-e)/(a-e)*r;return Math.round(i)}},{key:"getCoordinatesFromPartitionIndex",value:function(t,e,a){return e+t*a}},{key:"calculateAndReserveNearestValidPartitionIndex",value:function(t,e,a,r){var i=t,n=e,s=this.getNextNearestPartitionIndexes(i,n,0,0,this.numberOfXPartitions,this.numberOfYPartitions),o=0,l=null,h=null;for(O;o<25;){if(null==(l=s.next().value))return null;if(h=JSON.stringify(l),this.usedIndexes.has(h))o++;else{for(var d=this.getCoordinatesFromPartitionIndex(l.x,this.minX,this.annotationWidth),c=this.getCoordinatesFromPartitionIndex(l.y,this.minY,this.annotationHeight),p=!1,u=0;u<r.length;u++){var g=r[u],m=Math.abs(g.x-d),x=Math.abs(g.y-c),v=this.annotationWidth/2.1,f=this.annotationHeight/2.1;if(m<v&&x<f){O,o++,p=!0;break}}if(!p)break}}return this.usedIndexes.add(h),{x:l.x,y:l.y}}},{key:"getNextNearestPartitionIndexes",value:D().mark((function t(e,a,r,i,n,s){var o,l,h,d,c,p,u;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e<r?e=r:e>n&&(e=n),a<i?a=i:a>s&&(a=s),o=[{x:e,y:a}],(l=new Set).add(JSON.stringify(o[0]));case 5:if(0!==o.length){t.next=9;break}return console.log("No more valid locations to search"),t.abrupt("return",null);case 9:for(h=o.shift(),d=[{x:h.x+1,y:h.y},{x:h.x-1,y:h.y},{x:h.x,y:h.y+1},{x:h.x,y:h.y-1}],c=0;c<d.length;c++)p=d[c],u=JSON.stringify(d[c]),l.has(u)||p.x>=r&&p.x<=n&&p.y>=i&&p.y<=s&&(l.add(u),o.push(p));return t.next=14,h;case 14:t.next=5;break;case 16:case"end":return t.stop()}}),t)}))},{key:"doLineSegmentsIntersect",value:function(t,e,a,r,i,n,s,o){var l,h,d;return 0!==(l=(a-t)*(o-n)-(s-i)*(r-e))&&(h=((e-r)*(s-t)+(a-t)*(o-e))/l,0<(d=((o-n)*(s-t)+(i-s)*(o-e))/l)&&d<1&&0<h&&h<1)}},{key:"doesPointIntersectRectable",value:function(t,e){var a=t.x,r=t.y,i=e.left,n=e.right,s=e.top,o=e.bottom;return a<=n&&a>=i&&r>=o&&r<=s}},{key:"getSeparatedAnnotations",value:function(){for(var t=0;t<this.inputAnnotations.length;t++){var e=this.inputAnnotations[t],a=this.getClosestPartitionIndex(e.ax,this.minX,this.maxX,this.numberOfXPartitions),r=this.getClosestPartitionIndex(e.ay,this.minY,this.maxY,this.numberOfYPartitions),i=this.calculateAndReserveNearestValidPartitionIndex(a,r,e,this.inputAnnotations);if(null!==i){a=i.x,r=i.y;var n=this.getCoordinatesFromPartitionIndex(a,this.minX,this.annotationWidth),s=this.getCoordinatesFromPartitionIndex(r,this.minY,this.annotationHeight);e.ax=n,e.ay=s}else console.log("Unable to find a good place for the annotation: ",e.text)}for(var o=0;o<this.inputAnnotations.length;o++)for(var l=this.inputAnnotations[o],h=o;h<this.inputAnnotations.length;h++){var d=this.inputAnnotations[h];if(l!==d)if(this.doLineSegmentsIntersect(l.x,l.y,l.ax,l.ay,d.x,d.y,d.ax,d.ay)){var c=l.ax,p=l.ay;l.ax=d.ax,l.ay=d.ay,d.ax=c,d.ay=p}}return this.inputAnnotations.sort((function(t,e){var a=Math.abs(t.x-t.ax),r=Math.abs(t.y-t.ay),i=Math.abs(e.x-e.ax),n=Math.abs(e.y-e.ay);return Math.sqrt(i*i+n*n)-Math.sqrt(a*a+r*r)})),this.inputAnnotations}}]),t}(),L=a(5750),E=a.n(L),k="#0eac22",S="#6311a5",Z="#fe9918",C="#000000",G=14,H="#7f7f7f",z="Roboto, Arial, sans-serif",B={l:50,r:15,t:50,b:40},W=function(t){(0,o.Z)(a,t);var e=(0,d.Z)(a);function a(){var t;return(0,i.Z)(this,a),t=e.apply(this,arguments),(0,s.Z)((0,r.Z)(t),"state",{data:null,teamOne:[],teamTwo:[]}),t}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){for(var t,e,a,r,i=new Date,n=new j(this.props.data),s=[],o=this.props.timestamp?this.props.timestamp:0,d=n.getRatingsArray(this.props.dataLabelOne),c=n.getRatingsArray(this.props.dataLabelTwo),p=(t=Math).min.apply(t,(0,h.Z)((0,h.Z)(d).concat((0,h.Z)(c)).filter(Boolean))).clamp(0,1/0),u=(e=Math).max.apply(e,(0,h.Z)((0,h.Z)(d).concat((0,h.Z)(c)).filter(Boolean))).clamp(0,1/0),g={start:0,end:3500,size:10},m=d.filter(Boolean).length,x={x:d,type:"histogram",marker:{color:k},hovertemplate:"# of Players: %{y}<br>Rating Range: %{x}<br>Percentile: %{text}<extra></extra>",selected:{marker:{color:"red"}},showlegend:!0,name:"N = ".concat(m.toLocaleString()),autobinx:m<1e3,xbins:g,hovermode:"x unified",hoveron:"points+fills"},v={title:{text:this.props.chartOneLabel,font:{family:z,size:18},xanchor:"center",yanchor:"bottom"},margin:B,xaxis:{title:{text:"Rating",font:{family:z,size:G,color:H}},range:[p,u],fixedrange:!0},yaxis:{title:{text:"Number of Players",font:{family:z,size:G,color:H}},fixedrange:!0},marker:{color:k},hovermode:"false",legend:{x:1,y:1,xanchor:"right"}},f=[x],y=Plotly.newPlot("random_map_histogram",f,v,{scrollZoom:!1,responsive:!0,showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com"}),b=[],w=0;w<s.length;w++)b[w]=s[w][2];for(var R=c.filter(Boolean).length,T={x:c,type:"histogram",marker:{color:k},showlegend:!0,name:"N = ".concat(R.toLocaleString()),autobinx:R<1e3,xbins:g,hovertemplate:"# of Players: %{y}<br>Rating Range: %{x}<br>Percentile: %{text}<extra></extra>"},M={title:{text:this.props.chartTwoLabel,font:{family:z,size:18},xanchor:"center",yanchor:"bottom"},margin:B,xaxis:{title:{text:"Rating",font:{family:z,size:G,color:H}},range:[p,u],fixedrange:!0},yaxis:{title:{text:"Number of Players",font:{family:z,size:G,color:H}},fixedrange:!0},legend:{x:1,y:1,xanchor:"right"}},_=[T],N=Plotly.newPlot("team_random_map_histogram",_,M,{scrollZoom:!1,responsive:!0,showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com"}),P=n.getAllNames(),D=d,O=c,I=[],L=[],E=[],S=0;S<d.length;S++)void 0!==D[S]&&void 0!==O[S]&&(I.push(P[S]),L.push(D[S]),E.push(O[S]));var Z={x:L,y:E,text:I,mode:"markers",type:"scattergl",textposition:"top center",textfont:{family:z},marker:{size:2,color:k},hovertemplate:"Name: %{text}<br>Team: %{y}<br>1v1: %{x}<extra></extra>"},W=(a=Math).min.apply(a,(0,h.Z)(L)),F=(r=Math).max.apply(r,(0,h.Z)(L)),Y=function(t,e,a,r){var i=A.Z.linearRegression(e,t),n=a,s=r;return{y:[n*i.slope+i.intercept,s*i.slope+i.intercept],x:[n,s],mode:"lines",type:"scattergl",name:"R2=".concat(i.r2.toFixed(3)),hovertemplate:"y=".concat(i.slope.toFixed(3),"*x+").concat(i.intercept.toFixed(3)),line:{width:.5,color:C,opacity:.5}}}(L,E,W,F),U=[Y,Z],q={hovermode:"closest",showlegend:!1,title:{text:this.props.chartOneLabel+" vs<br>"+this.props.chartTwoLabel,font:{family:z,size:18},xanchor:"center",yanchor:"bottom"},margin:B,xaxis:{title:{text:"1v1 Rating",font:{family:z,size:G,color:H}},range:[W,F],fixedrange:!0},yaxis:{title:{text:"Team Rating",font:{family:z,size:G,color:H}},fixedrange:!0}},K=Plotly.newPlot("combo_scatterplot",U,q,{scrollZoom:!1,responsive:!0,showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com"}),J=document.getElementById("last_updated"),V=new Date(o);try{J.innerHTML="\u2020 Last updated on <i>".concat(V.toLocaleString("default",{timeZoneName:"short"}),"</i>")}catch(Q){return(0,l.Z)(Q,RangeError)}Promise.all([y,N,K]).then(function(t){document.getElementById("loading-hider").classList.remove("hidden"),document.getElementById("loading").classList.add("none"),this.randomMapDiv=t[0],this.teamRandomMapDiv=t[1],this.scatterplotDiv=t[2],this.randomMapDiv.addEventListener("touchstart",(function(t){t.stopPropagation()}),!0),this.teamRandomMapDiv.addEventListener("touchstart",(function(t){t.stopPropagation()}),!0),this.scatterplotDiv.addEventListener("touchstart",(function(t){t.stopPropagation()}),!0),X(this.randomMapDiv,n,this.props.dataLabelOne),X(this.teamRandomMapDiv,n,this.props.dataLabelTwo);var e=function(t){for(var e={},a=("?"===t[0]?t.substr(1):t).split("&"),r=0;r<a.length;r++){var i=a[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return e}(window.location.search);this.setState({data:n,teamOne:e.team_one?e.team_one.split("-"):[],teamTwo:e.team_two?e.team_two.split("-"):[]}),gtag("event","timing_complete",{name:"Load "+this.props.title,value:new Date-i,event_category:"JS Dependencies"})}.bind(this))}},{key:"componentDidUpdate",value:function(){var t=this;if(this.randomMapDiv&&this.teamRandomMapDiv&&this.scatterplotDiv){for(var e=(new Date).getTime(),a=this.state.teamOne?this.state.teamOne.filter((function(e){return t.state.data.exists(e)})):[],r=this.state.teamTwo?this.state.teamTwo.filter((function(e){return t.state.data.exists(e)})):[],i=[],n=0;n<a.length;n++)i.push({color:S,value:this.state.data.getPlayerRating(this.props.dataLabelOne,a[n]),name:this.state.data.getName(a[n])});for(var s=0;s<r.length;s++)i.push({color:Z,value:this.state.data.getPlayerRating(this.props.dataLabelOne,r[s]),name:this.state.data.getName(r[s])});F(this.randomMapDiv,i);for(var o=[],l=0;l<a.length;l++)o.push({color:S,value:this.state.data.getPlayerRating(this.props.dataLabelTwo,a[l]),name:this.state.data.getName(a[l])});for(var h=0;h<r.length;h++)o.push({color:Z,value:this.state.data.getPlayerRating(this.props.dataLabelTwo,r[h]),name:this.state.data.getName(r[h])});F(this.teamRandomMapDiv,o);for(var d=[],c=0;c<a.length;c++)d.push({color:S,valueX:this.state.data.getPlayerRating(this.props.dataLabelOne,a[c]),valueY:this.state.data.getPlayerRating(this.props.dataLabelTwo,a[c]),name:this.state.data.getName(a[c])});for(var p=0;p<r.length;p++)d.push({color:Z,valueX:this.state.data.getPlayerRating(this.props.dataLabelOne,r[p]),valueY:this.state.data.getPlayerRating(this.props.dataLabelTwo,r[p]),name:this.state.data.getName(r[p])});!function(t,e){for(var a=0,r={},i=0;i<e.length;i++)void 0===r[e[i].color]?(r[e[i].color]={counter:a,x:[e[i].valueX],y:[e[i].valueY]},a++):(r[e[i].color].x.push(e[i].valueX),r[e[i].color].y.push(e[i].valueY));for(;t.data.length>=3;)Plotly.deleteTraces(t,2);var n=[];for(var s in r){var o={x:r[s].x,y:r[s].y,mode:"markers",type:"scattergl",textposition:"top center",marker:{size:8,color:s},hoverinfo:"skip"};n.push(o)}t.layout.xaxis.range[1],t.layout.xaxis.range[0];for(var l=t.layout.yaxis.range[1]-t.layout.yaxis.range[0],h=[],d=0;d<e.length;d++)if(e[d].valueX&&e[d].valueY){var c={text:e[d].name,x:e[d].valueX,y:e[d].valueY,ax:e[d].valueX,ay:e[d].valueY+l/10,axref:"x",ayref:"y",bgcolor:"rgba(255, 255, 255, 0.9)",arrowcolor:"rgba(0, 0, 0, 0.9)",font:{size:12},bordercolor:e[d].color,borderwidth:1,arrowsize:1,arrowwidth:1};h.push(c)}var p={annotations:new I(h,t.layout.xaxis.range[0],t.layout.xaxis.range[1],t.layout.yaxis.range[0],t.layout.yaxis.range[1]).getSeparatedAnnotations()};Plotly.react(t,t.data.concat(n),Object.assign(t.layout,p),t.config)}(this.scatterplotDiv,d),gtag("event","select_content",{event_label:window.location.pathname+window.location.search}),console.log("Update time ",(new Date).getTime()-e)}}},{key:"render",value:function(){var t=null;return 0===this.state.teamOne.length&&0===this.state.teamTwo.length||(t=(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)("table",{className:"tg",style:{fontSize:"12px",width:"100%",tableLayout:"fixed",overflow:"hidden",textAlign:"center",borderCollapse:"collapse"},children:(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{rowSpan:"2",width:"28%"}),(0,c.jsx)("th",{colSpan:"2",width:"24%",children:"1v1"}),(0,c.jsx)("th",{colSpan:"2",width:"24%",children:"Team"}),(0,c.jsx)("th",{colSpan:"2",width:"24%",children:"Combo*"})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{width:"12%",children:"Rating"}),(0,c.jsx)("td",{width:"12%",children:"%"}),(0,c.jsx)("td",{width:"12%",children:"Rating"}),(0,c.jsx)("td",{width:"12%",children:"%"}),(0,c.jsx)("td",{width:"12%",children:"Rating"}),(0,c.jsx)("td",{width:"12%",children:"%"})]})]})})}),(0,c.jsx)(T,{teamLabel:"Team 1",data:this.state.data,players:this.state.teamOne,color:S,dataLabelOne:this.props.dataLabelOne,dataLabelTwo:this.props.dataLabelTwo,dataLabelThree:this.props.dataLabelThree}),(0,c.jsx)(T,{teamLabel:"Team 2",data:this.state.data,players:this.state.teamTwo,color:Z,dataLabelOne:this.props.dataLabelOne,dataLabelTwo:this.props.dataLabelTwo,dataLabelThree:this.props.dataLabelThree})]})),(0,c.jsxs)("html",{children:[(0,c.jsxs)("head",{children:[(0,c.jsx)("title",{children:"Age of Empires II: Definitive Edition Rating Charts"}),(0,c.jsx)("meta",{name:"description",content:"Histograms and a scatterplot for 'Age of Empires II: Definitive Edition' 1v1 Random Map and Team Random Map ratings elo. Updated daily."}),(0,c.jsx)("meta",{property:"og:image",content:"https://i.imgur.com/cVLgt68.png"}),(0,c.jsx)("script",{type:"text/javascript",src:"https://cdn.plot.ly/plotly-strict-2.0.0-rc.0.min.js"}),(0,c.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=UA-163727547-1"}),(0,c.jsx)("script",{src:"ga.js"}),(0,c.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"})]}),(0,c.jsx)("body",{style:{fontFamily:z},children:(0,c.jsxs)("div",{className:E().center,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"Age of Empires II: Definitive Edition Rating Charts"}),(0,c.jsx)("div",{id:"subheader",style:{paddingBottom:"16px",marginTop:"-16px",fontSize:"9pt"},children:(0,c.jsxs)("i",{children:[this.props.title,". See instead"," ",(0,c.jsx)("a",{href:this.props.chartAltLink,children:this.props.chartAltLinkText}),(0,c.jsx)("br",{}),"Updated daily\u2020"]})})]}),(0,c.jsx)("div",{id:"loading",style:{zIndex:1,margin:"auto",width:"8%",marginTop:"100px"},children:(0,c.jsxs)("div",{className:"loading-spinner",children:[(0,c.jsx)("div",{className:"spinner-dot"}),(0,c.jsx)("div",{className:"spinner-dot"}),(0,c.jsx)("div",{className:"spinner-dot"}),(0,c.jsx)("div",{className:"spinner-dot"}),(0,c.jsx)("div",{className:"spinner-dot"}),(0,c.jsx)("div",{className:"spinner-dot"})]})}),(0,c.jsxs)("div",{id:"loading-hider",className:"hidden",children:[(0,c.jsxs)("div",{id:"selectors",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"teamOne",children:"Team 1:"}),(0,c.jsx)("div",{style:{border:S,borderStyle:"solid",borderRadius:"7px"},children:(0,c.jsx)(f,{id:"teamOne",color:S,dataSet:this.state.data,blacklist:this.state.teamTwo,value:this.state.teamOne,ratingLabelOne:this.props.dataLabelOne,ratingLabelTwo:this.props.dataLabelTwo,onSelection:function(t){setTimeout(function(){this.setState({teamOne:t})}.bind(this),1),history&&history.pushState(null,"","?team_one="+t.join("-")+"&team_two="+this.state.teamTwo.join("-"))}.bind(this)})})]}),(0,c.jsxs)("div",{style:{marginTop:"16px"},children:[(0,c.jsx)("label",{htmlFor:"teamTwo",children:"Team 2:"}),(0,c.jsx)("div",{style:{border:Z,borderStyle:"solid",borderRadius:"7px"},children:(0,c.jsx)(f,{id:"teamTwo",color:Z,dataSet:this.state.data,blacklist:this.state.teamOne,value:this.state.teamTwo,ratingLabelOne:this.props.dataLabelOne,ratingLabelTwo:this.props.dataLabelTwo,onSelection:function(t){setTimeout(function(){this.setState({teamTwo:t})}.bind(this),1),history&&history.pushState(null,"","?team_one="+this.state.teamOne.join("-")+"&team_two="+t.join("-"))}.bind(this)})})]})]}),(0,c.jsx)("hr",{className:E().divider}),(0,c.jsx)("div",{id:"table",children:t}),(0,c.jsx)("hr",{className:E().divider}),(0,c.jsx)("div",{id:"random_map_histogram"}),(0,c.jsx)("div",{id:"team_random_map_histogram"}),(0,c.jsx)("div",{id:"combo_scatterplot"})]}),(0,c.jsxs)("div",{id:"footer",style:{fontSize:"12px",margin:"10px"},children:[(0,c.jsx)("div",{id:"last_updated"}),"* Combo rating = Sqrt(RandomMapRating^2 + TeamRandomMapRating^2)",(0,c.jsx)("br",{}),"Players will only appear if they have played at least 10 ranked games and at least one ranked game in the last 28 days",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)("a",{href:"https://endlesswips.com/aoe2-de-rating-charts#ratings",children:"About"}),(0,c.jsx)("br",{})," View source code on"," ",(0,c.jsx)("a",{href:"https://github.com/SiegeEngineers/aoe2-de-rating-charts",children:"github"}),(0,c.jsx)("br",{}),"Data from"," ",(0,c.jsx)("a",{href:"https://aoe2.net/#api",children:"https://aoe2.net/#api"})]})]})})]})}}]),a}(p.Component);function F(t,e){var a=t.calcdata[0].length;e=e.filter((function(t){return t.value}));for(var r=1,i={},n=0;n<e.length;n++){var s=e[n].color;void 0===i[s]&&(i[s]=r,r++)}e.sort((function(t,e){return t.value-e.value}));for(var o=0,l=new Array(a).fill(0),h=0;h<a;h++){for(;o<e.length&&e[o].value>=t.calcdata[0][h].ph0&&e[o].value<=t.calcdata[0][h].ph1;)l[h]=i[e[o].color],e[o].bucketIndex=h,o++;if(o>=e.length)break}var d=Object.keys(i).length,c=[[0,k]];for(var p in i){var u=[i[p]/d,p];c.push(u)}var g={};g=1==c.length?{"marker.color":c[0][1]}:{"marker.color":[l],"marker.colorscale":[c],"marker.cmax":d,"marker.cmin":0};for(var m=t.layout.xaxis.range[1]-t.layout.xaxis.range[0],x=(t.layout.yaxis.range[1],t.layout.yaxis.range[0],[]),v=0;v<e.length;v++)if(e[v].value){if(void 0===t.calcdata[0][e[v].bucketIndex]){console.log("Skipping player outside of histogram range");continue}var f={text:e[v].name,x:e[v].value,y:t.calcdata[0][e[v].bucketIndex].s,ax:e[v].value,ay:t.calcdata[0][e[v].bucketIndex].s+m/10,axref:"x",ayref:"y",bgcolor:"rgba(255, 255, 255, 0.9)",arrowcolor:"rgba(0, 0, 0, 0.9)",font:{size:12},bordercolor:e[v].color,borderwidth:1,arrowsize:1,arrowwidth:1};x.push(f)}var y={annotations:new I(x,t.layout.xaxis.range[0],t.layout.xaxis.range[1],t.layout.yaxis.range[0],t.layout.yaxis.range[1]).getSeparatedAnnotations()};Object.assign(t.layout,y),Plotly.restyle(t,g)}function X(t,e,a){for(var r=t.calcdata[0].length,i=[],n=0;n<r;n++){var s=t.calcdata[0][n].p;i.push(e.formatPercentage(e.getPercentileForRating(a,s)))}var o={text:[i]};Plotly.update(t,o)}},1039:function(t,e,a){"use strict";var r=a(1438),i=a(2951),n=function(){function t(){(0,r.Z)(this,t)}return(0,i.Z)(t,null,[{key:"invert",value:function(t){var e={};for(var a in t)e[t[a]]=a;return e}},{key:"getLeaderboardLabels",value:function(){return Object.freeze({0:"0",1:"1",2:"2",3:"3",4:"4",13:"7",14:"8"})}},{key:"getAllLabels",value:function(){return Object.freeze({NAME:"N",UNRANKED_RATING:"0",DEATHMATCH_RATING:"1",TEAM_DEATHMATCH_RATING:"2",RANDOM_MAP_RATING:"3",TEAM_RANDOM_MAP_RATING:"4",RANDOM_MAP_COMBO_RATING:"5",DEATHMATCH_COMBO_RATING:"6",EMPIRE_WARS_RATING:"7",EMPIRE_WARS_TEAM_RATING:"8",EMPIRE_WARS_COMBO_RATING:"9"})}},{key:"linearRegression",value:function(t,e){for(var a={},r=t.length,i=0,n=0,s=0,o=0,l=0,h=0;h<t.length;h++)i+=e[h],n+=t[h],s+=e[h]*t[h],o+=e[h]*e[h],l+=t[h]*t[h];return console.log(i,n,s,o,l),a.slope=(r*s-i*n)/(r*o-i*i),a.intercept=(n-a.slope*i)/r,a.r2=Math.pow((r*s-i*n)/Math.sqrt((r*o-i*i)*(r*l-n*n)),2),a}}]),t}();e.Z=n},5750:function(t){t.exports={divider:"page_divider__Inrca",center:"page_center__KExgV"}},7355:function(t){t.exports={teamTable:"team-table_teamTable__D1pIG",teamAvgRow:"team-table_teamAvgRow__IKKNK"}}}]);